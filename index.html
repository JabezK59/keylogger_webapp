<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web-Based Keylogger</title>
</head>
<body>
    <h1>Web-Based Keylogger App</h1>
    <p>Type something below, and download the logged keys as a text file after clicking "Complete":</p>
    
    <!-- Textarea to capture keystrokes -->
    <textarea id="keylogger" rows="5" cols="50" placeholder="Type here..."></textarea>
    
    <!-- Complete button -->
    <button id="completeButton">Complete</button>

    <!-- Optional: Area to display output -->
    <div id="output" style="margin-top: 20px;"></div>

    <script>
        // Array to store logged keys
        const loggedKeys = [];

        // Log keys typed in the textarea
        const textField = document.getElementById('keylogger');
        textField.addEventListener('input', function() {
            const value = textField.value;
            const lastKey = value[value.length - 1] || '';
            if (lastKey) {
                loggedKeys.push(lastKey);
            }
        });

        // Function to detect mobile devices
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        // Handle the "Complete" button click
        const completeButton = document.getElementById('completeButton');
        completeButton.addEventListener('click', function() {
            const outputText = "Logged Keys:\n" + loggedKeys.join('');
            const blob = new Blob([outputText], { type: 'text/plain' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);

            if (isMobileDevice()) {
                // For mobile, open in a new tab
                a.target = '_blank';
                a.rel = 'noopener noreferrer';
                window.open(a.href, '_blank');
            } else {
                // For desktop, download directly
                a.download = 'logged_keys.txt';
                a.click();
            }

            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            // Optional: Display on page
            const outputDiv = document.getElementById('output');
            outputDiv.innerText = outputText;
        });
    </script>
</body>
</html>
